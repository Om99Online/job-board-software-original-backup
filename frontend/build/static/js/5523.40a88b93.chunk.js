"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[5523],{55523:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var l=a(72791),o=a(65167),t=a(93953),r=a(20890),n=a(93517),i=a(50533),m=a(98333),c=a(31243),d=a(12503),p=a(10287),u=a(21830),x=a.n(u),h=a(57689),j=a(88329),b=a(24529),f=a(80184);const y=()=>{const[e,s]=(0,l.useState)({xml_url:"",employer_id:""}),[a,u]=(0,l.useState)({xml_url:"",employer_id:""}),[y,_]=(0,l.useState)(!1),[g,C]=(0,l.useState)([]),v=j.Z.get("token"),w=j.Z.get("adminID"),N=(0,h.s0)(),Z=a=>{const{name:l,value:o}=a.target;s((e=>({...e,[l]:o}))),u((e=>({...e,[l]:""}))),console.log(e)};return(0,l.useEffect)((()=>{v?((async()=>{try{_(!0);const e=await c.Z.post(d.Z+"/admin/job/admin_jobimport",null,{headers:{"Content-Type":"application/json",key:p.Z,token:v,adminid:w}});_(!1),C(e.data.response.employers)}catch(e){_(!1),console.log("Error at import jobs at Admin panel")}})(),window.scrollTo(0,0)):N("/admin")}),[v,N]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(o.Z,{}),(0,f.jsxs)("div",{className:"APBasic",children:[(0,f.jsx)(t.Z,{}),y?(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"loader-container"})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("div",{className:"site-min-height",children:[(0,f.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,f.jsxs)(n.Z,{"aria-label":"breadcrumb",separator:(0,f.jsx)(m.Z,{fontSize:"small"}),children:[(0,f.jsx)(i.Z,{underline:"hover",color:"inherit",onClick:()=>N("/admin/admins/dashboard"),children:"Dashboard"}),(0,f.jsx)(i.Z,{underline:"hover",color:"inherit",onClick:()=>N("/admin/jobs"),children:"List Jobs"}),(0,f.jsx)(r.Z,{color:"text.primary",children:"Import Jobs"})]})}),(0,f.jsx)("h2",{className:"adminPageHeading",children:"Import Jobs"}),(0,f.jsx)("form",{className:"adminForm",children:(0,f.jsxs)("div",{className:"mb-4 mt-5",children:[(0,f.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,f.jsxs)("label",{for:"formFile",class:"form-label",children:["XML Feed URL",(0,f.jsx)("span",{className:"RedStar",children:"*"})]}),(0,f.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${a.xml_url&&"input-error"}`,name:"xml_url",placeholder:"XML URL",value:e.xml_url,onChange:Z}),a.xml_url&&(0,f.jsx)("div",{className:"text-danger",children:a.xml_url})]}),(0,f.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,f.jsxs)("label",{for:"formFile",class:"form-label",children:["Company Name",(0,f.jsx)("span",{className:"RedStar",children:"*"})]}),(0,f.jsxs)("select",{className:`form-select ${a.employer_id&&"input-error"}`,"aria-label":"Default select example",name:"employer_id",value:e.employer_id,onChange:Z,children:[(0,f.jsx)("option",{selected:!0,value:"",children:"Select Company"}),g.map((e=>(0,f.jsx)("option",{value:e.id,children:e.company_name?e.company_name:e.first_name})))]}),a.employer_id&&(0,f.jsx)("div",{className:"text-danger",children:a.employer_id})]}),(0,f.jsx)("button",{type:"button",className:"btn btn-primary button1",onClick:async()=>{try{const s={};if(""===e.xml_url)s.xml_url="URL is required",window.scrollTo(0,0);else{/^(https:\/\/)(www\.)?[\w.-]+\.[a-z]{2,5}(\/\S*)?$/i.test(e.xml_url)||(s.xml_url="Invalid URL format")}if(""===e.employer_id&&(s.employer_id="Please select a company"),u(s),0===Object.keys(s).length){if((await x().fire({title:"Import?",text:"Do you want to Import Jobs?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){_(!0);const s=await c.Z.post(d.Z+"/admin/job/admin_jobimport",e,{headers:{"Content-Type":"application/json",key:p.Z,token:v,adminid:w}});_(!1),200===s.data.status?(x().fire({title:"Jobs Imported successfully!",icon:"success",confirmButtonText:"Close"}),N("/admin/jobs/importlist")):x().fire({title:s.data.message,icon:"error",confirmButtonText:"Close"})}}}catch(s){_(!1),x().fire({title:"Failed",text:"Could not Import Jobs. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not change username!",s)}},children:"NEXT"})]})})]}),(0,f.jsx)(b.Z,{})]})]})]})}}}]);
//# sourceMappingURL=5523.40a88b93.chunk.js.map