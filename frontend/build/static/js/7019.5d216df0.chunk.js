"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[7019],{7019:(e,a,s)=>{s.r(a),s.d(a,{default:()=>_});var t=s(72791),l=s(65167),o=s(93953),n=s(20890),r=s(93517),i=s(98333),c=(s(5282),s(31243)),m=s(12503),d=s(10287),p=s(57689),u=s(11087),x=s(89868),h=s(21830),b=s.n(h),j=s(88329),f=s(1588),g=s(66770),y=s.n(g),N=(s(86009),s(24529)),v=s(80184);const _=()=>{const[e,a]=(0,t.useState)({user_id:"",job_title:"",category:"",jobDescription:"",company_name:"",work_type:"",contact_name:"",skill:"",contact_number:"",company_website:"",companyProfile:"",designation:"",location:"",last_date:"",experience:"",annual_salary:"",logo:"",subCategory:""}),[s,h]=(0,t.useState)({job_title:"",category:"",subCategory:[],jobDescription:"",company_name:"",created:"",companyProfile:"",work_type:"",contact_name:"",contact_number:"",company_website:"",skill:"",designation:"",location:"",experience:"",annual_salary:"",logo:"",last_date:"",user_id:""}),[g,_]=(0,t.useState)(null),{slug:C}=(0,p.UO)(),B=((0,t.useRef)(null),j.Z.get("token")),D=j.Z.get("adminID"),S=j.Z.get("mapKey"),E=(0,p.s0)(),[w,k]=(0,t.useState)([]),[P,I]=(0,t.useState)([]),[F,Z]=(0,t.useState)([]),[$,A]=(0,t.useState)([]),[R,J]=(0,t.useState)([]),[L,T]=(0,t.useState)([]),[q,z]=(0,t.useState)([]),[U,O]=(0,t.useState)([]),[H,W]=(0,t.useState)([]),[K,M]=(0,t.useState)(!1),[Y,V]=(0,t.useState)([]),[G,Q]=(0,t.useState)([]),[X,ee]=(0,t.useState)(""),[ae,se]=(0,t.useState)([]),[te,le]=(0,t.useState)([]),oe=e=>{const{name:s,value:t}=e.target;"skill"===s?h((e=>({...e,skill:[...e.skill,t]}))):"subCategory"===s?h((e=>({...e,subCategory:[...e.subCategory,t]}))):(h((e=>({...e,[s]:t}))),a((e=>({...e,[s]:""}))))};(0,t.useEffect)((()=>{B?((async()=>{try{M(!0);const u=await c.Z.post(m.Z+`/admin/job/admin_edit/${C}`,null,{headers:{"Content-Type":"application/json",key:d.Z,token:B,adminid:D}});M(!1);var e=u.data.response.categories,a=u.data.response.job.category,s=[];e.forEach((e=>{if(parseInt(a)==parseInt(e.id)){let a={value:e.id,label:e.name};s.push(a)}}));var t=u.data.response.subcategories,l=u.data.response.job.subcategory_id;if(null!==l){var o=l.split(","),n=[];o.forEach((e=>{t.forEach((a=>{if(parseInt(e)==parseInt(a.id)){let e={value:a.id,label:a.name};n.push(e)}}))})),se(n)}console.log("Yha");var r=u.data.response.skillList,i=u.data.response.job.skill,p=[];r.forEach((e=>{for(let a=0;a<i.length;a++)if(parseInt(i[a])==e.id){let a={value:e.id,label:e.name};p.push(a)}})),_(u.data.response.job.logo_path),h(u.data.response.job),Q(p),le(s),Z(t),k(u.data.response),I(u.data.response.categories),A(u.data.response.designationlList),J(u.data.response.skillList),T(u.data.response.experience),z(u.data.response.sallery),O(u.data.response.worktype),V(u.data.response.employers),W(u.data.response.job.skill)}catch(u){console.log("No data received")}})(),ne(),window.scrollTo(0,0)):E("/admin")}),[B,E]);const ne=async e=>{se([]);try{const a=await c.Z.post(m.Z+`/categories/getSubCategory/${e}`,null,{headers:{"Content-Type":"application/json",key:d.Z,token:B,adminid:D}});Z(a.data.response)}catch(a){console.log("Couldn't get Sub category data!")}},re=async t=>{const l=t.target,o=t.target.files[0];if(o){if(o.size>614400)return b().fire({title:"Image size should be under 600 KB",icon:"warning",confirmButtonText:"Close"}),void(l.value="");(function(e){return new Promise(((a,s)=>{const t=new FileReader;t.readAsDataURL(e),t.onload=()=>{a(t.result)},t.onerror=e=>{s(e)}}))})(o).then((e=>{h({...s,logo:e}),_(e)})),a({...e,logo:""})}},[ie,ce]=(0,t.useState)(null),[me,de]=(0,t.useState)([]);(0,t.useEffect)((()=>{const e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${S}&libraries=places`,e.onload=()=>{ce(new window.google.maps.places.AutocompleteService),console.log(ie)},document.body.appendChild(e),()=>{document.body.removeChild(e)}}),[]);const pe=e=>{const{value:t}=e.target;xe(!1),""==t&&xe(!0),""!=t&&a({location:""}),h((e=>({...e,location:t}))),ie&&ie.getPlacePredictions({input:t,types:["(cities)"]},((e,a)=>{de("OK"===a&&e?e.map((e=>e.description)):[])})),""===s.location&&de([])},[ue,xe]=(0,t.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(l.Z,{}),(0,v.jsxs)("div",{className:"APBasic",children:[(0,v.jsx)(o.Z,{}),K?(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("div",{className:"loader-container"})}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:"site-min-height",children:[(0,v.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,v.jsxs)(r.Z,{"aria-label":"breadcrumb",separator:(0,v.jsx)(i.Z,{fontSize:"small"}),children:[(0,v.jsx)(u.rU,{to:"/admin/admins/dashboard",underline:"hover",color:"inherit",children:"Dashboard"}),(0,v.jsx)(u.rU,{to:"/admin/jobs",underline:"hover",color:"inherit",children:"Jobs"}),(0,v.jsx)(n.Z,{color:"text.primary",children:"Edit Jobs"})]})}),(0,v.jsx)("h2",{className:"adminPageHeading",children:"Edit Job"}),(0,v.jsxs)("form",{className:"adminForm",children:[(0,v.jsxs)("div",{className:"mb-5 mt-4",children:[(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsx)("label",{className:"form-label",htmlFor:"form3Example1",children:"Select Employer"}),(0,v.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${e.company_name&&"input-error"}`,name:"company_name",value:s.company_name,placeholder:"Company Name",onChange:oe,disabled:!0}),e.company_name&&(0,v.jsx)("div",{className:"text-danger",children:e.company_name})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example1",children:["Job title",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${e.job_title&&"input-error"}`,name:"job_title",value:s.job_title,placeholder:"Job Title",onChange:oe}),e.job_title&&(0,v.jsx)("div",{className:"text-danger",children:e.job_title})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx skillPackageCategory APJoditEditor",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example1",children:["Category",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)(x.ZP,{isSearchable:!0,name:"category",options:P.map((e=>({value:e.id,label:e.name}))),className:"basic-multi-select",value:te,classNamePrefix:"select",onChange:e=>{(e=>{le(e);const a=e.value;ne(e.value),h((e=>({...e,category:a})))})(e)}}),e.category&&(0,v.jsx)("div",{className:"text-danger",children:e.category})]})]}),s.category&&F?(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx skillPackageSubcategory APJoditEditor",children:[(0,v.jsx)("label",{className:"form-label",htmlFor:"form3Example1",children:"Sub Category"}),(0,v.jsx)(x.ZP,{isMulti:!0,isSearchable:!0,name:"Subcategory",options:F.map((e=>({value:e.id,label:e.name}))),className:"basic-multi-select",value:ae,classNamePrefix:"select",onChange:e=>{se(e);const a=e.map((e=>e.value));h((e=>({...e,subCategory:a})))}})]}):"",(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx APJoditEditor",children:[(0,v.jsx)("label",{className:"form-label",htmlFor:"form3Example3",children:"Job Description"}),(0,v.jsx)(y(),{theme:"snow",value:s.jobDescription,onChange:e=>oe({target:{name:"jobDescription",value:e}}),style:{minHeight:"250px",height:"200px"},placeholder:"Add your text here..."}),e.jobDescription&&(0,v.jsx)("div",{className:"text-danger",children:e.jobDescription})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Company Name",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)("input",{type:"text",id:"form3Example3",className:`form-control ${e.company_name&&"input-error"}`,name:"company_name",value:s.company_name,placeholder:"Company Name",onChange:oe}),e.company_name&&(0,v.jsx)("div",{className:"text-danger",children:e.company_name})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example1",children:["Work Type",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsxs)("select",{className:`form-select ${e.work_type&&"input-error"}`,"aria-label":"Default select example",name:"work_type",value:s.work_type,onChange:oe,children:[(0,v.jsx)("option",{selected:!0,children:"Select Work Type"}),Object.entries(U).map((e=>{let[a,s]=e;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("option",{value:a,onChange:()=>{sessionStorage.setItem("jobtype","value")},children:s},a)})}))]}),e.work_type&&(0,v.jsx)("div",{className:"text-danger",children:e.work_type})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Contact Name",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)("input",{type:"text",id:"form3Example3",className:`form-control ${e.contact_name&&"input-error"}`,name:"contact_name",value:s.contact_name,placeholder:"Contact Name",onChange:oe}),e.contact_name&&(0,v.jsx)("div",{className:"text-danger",children:e.contact_name})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx  APJoditEditor",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Company Profile",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)(y(),{theme:"snow",value:s.companyProfile,onChange:e=>oe({target:{name:"companyProfile",value:e}}),style:{minHeight:"250px",height:"200px"},placeholder:"Add your text here..."}),e.companyProfile&&(0,v.jsx)("div",{className:"text-danger",children:e.companyProfile})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Contact Number",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)("input",{type:"text",id:"form3Example3",className:`form-control ${e.contact_number&&"input-error"}`,name:"contact_number",value:s.contact_number,placeholder:"Contact Number",onChange:oe}),e.contact_number&&(0,v.jsx)("div",{className:"text-danger",children:e.contact_number})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsx)("label",{className:"form-label",htmlFor:"form3Example3",children:"Company Website"}),(0,v.jsx)("input",{type:"text",id:"form3Example3",className:`form-control ${e.company_website&&"input-error"}`,name:"company_website",value:s.company_website,placeholder:"Company Website",onChange:oe}),e.company_website&&(0,v.jsx)("div",{className:"text-danger",children:e.company_website}),(0,v.jsx)("div",{id:"emailHelp",className:"form-text",children:"Eg: https://www.google.com or www.google.com"})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example1",children:["Experience (In Years)",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsxs)("select",{className:`form-select ${e.experience&&"input-error"}`,"aria-label":"Default select example",name:"experience",value:s.experience,onChange:oe,children:[(0,v.jsx)("option",{selected:!0,children:"Choose Experience"}),Object.entries(L).map((e=>{let[a,s]=e;return(0,v.jsx)("option",{value:a,children:s},a)}))]}),e.experience&&(0,v.jsx)("div",{className:"text-danger",children:e.experience})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example1",children:["Annual Salary",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsxs)("select",{className:`form-select ${e.annual_salary&&"input-error"}`,"aria-label":"Default select example",name:"annual_salary",value:s.annual_salary,onChange:oe,children:[(0,v.jsx)("option",{selected:!0,children:"Select Salary"}),Object.entries(q).map((e=>{let[a,s]=e;return(0,v.jsx)("option",{value:a,children:s},a)}))]}),e.annual_salary&&(0,v.jsx)("div",{className:"text-danger",children:e.annual_salary})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx skillPackage  APJoditEditor",children:[(0,v.jsx)("label",{className:"form-label",htmlFor:"form3Example1",children:"Skills"}),(0,v.jsx)(x.ZP,{defaultValue:G,isMulti:!0,isSearchable:!0,name:"skill",options:R.map((e=>({value:e.id,label:e.name}))),className:"basic-multi-select",classNamePrefix:"select",value:G,onChange:e=>{Q(e)}}),X&&(0,v.jsx)("div",{className:"text-danger",children:X})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example1",children:["Designation",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsxs)("select",{className:`form-select ${e.designation&&"input-error"}`,"aria-label":"Default select example",name:"designation",value:s.designation,onChange:oe,children:[(0,v.jsx)("option",{selected:!0,value:"",children:"Choose Designation"}),$.map(((e,a)=>(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("option",{value:e.id,children:e.name},a)})))]}),e.designation&&(0,v.jsx)("div",{className:"text-danger",children:e.designation})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Location",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)("input",{type:"text",id:"form3Example3",className:`form-control ${e.location&&"input-error"}`,name:"location",value:s.location,placeholder:"Location",onChange:pe}),me.length>0&&(0,v.jsx)("div",{className:"suggestionsAdminSide",style:{display:ue?"none":""},children:(0,v.jsx)("ul",{className:"locationDropdown",children:me.map(((e,a)=>(0,v.jsx)("div",{className:"suggestion-item",children:(0,v.jsxs)("li",{onClick:()=>(e=>{pe({target:{name:"location",value:e}}),xe(!0),de([])})(e),children:[(0,v.jsxs)("div",{className:"eachLocation",children:[(0,v.jsx)("div",{className:"locationIcon",children:(0,v.jsx)(f.Z,{fontSize:"small"})})," ",(0,v.jsx)("div",{className:"locationSuggestion",children:e})]})," "]})},a)))})}),e.location&&(0,v.jsx)("div",{className:"text-danger",children:e.location})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Last Date",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)("input",{type:"date",id:"form3Example3",className:`form-control ${e.last_date&&"input-error"}`,name:"last_date",value:s.last_date,placeholder:"Last Date",onChange:oe}),e.last_date&&(0,v.jsx)("div",{className:"text-danger",children:e.last_date})]}),(0,v.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,v.jsx)("label",{for:"formFile",class:"form-label",children:"Company Logo"}),(0,v.jsx)("input",{class:"form-control",type:"file",id:"formFile",label:"profile_image",name:"logo",accept:".jpeg, .png, .jpg, .gif",onChange:e=>re(e)}),(0,v.jsx)("div",{id:"emailHelp",class:"form-text",children:"Supported File Types: gif, jpg, jpeg, png (Max. 600 KB)."}),g&&(0,v.jsx)("div",{children:(0,v.jsx)("div",{className:"",children:(0,v.jsx)("img",{className:"selectedInputImage",src:g,alt:"Selected"})})})]}),(0,v.jsxs)("div",{className:"form-outline mb-5 DashBoardInputBx DashBoardCreatBx",children:[(0,v.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Job Posted Date",(0,v.jsx)("span",{className:"RedStar",children:"*"})]}),(0,v.jsx)("input",{type:"date",id:"form3Example3",className:"form-control",name:"last_date",value:s.created,placeholder:"Last Date",onChange:oe})]}),(0,v.jsxs)("div",{className:"APAddJobBottomButtons",children:[(0,v.jsx)("button",{type:"button",className:"btn btn-primary button1",onClick:async()=>{var e=document.getElementsByName("skill"),t=[];e.forEach((e=>{R.forEach((a=>{a.id==e.value&&t.push(a.id)}))}));try{const{job_title:e,category:l,company_name:o,work_type:n,contact_name:r,skill:i,contact_number:p,companyProfile:u,designation:x,location:h,last_date:j,experience:f,annual_salary:g,company_website:y}=s;if(!e||!l||!o||!n||!r||!p||!u||!x||!h||!j||!f||!g)return void a({job_title:e?"":"Job Title is required",category:l?"":"Category is required",company_name:o?"":"Company Name is required",work_type:n?"":"Work Type is required",contact_name:r?"":"Contact Name is required",contact_number:p?"":"Contact Number is required",companyProfile:u?"":"Company Profile is required",designation:x?"":"Designation is required",location:h?"":"Location is required",last_date:j?"":"Last Date is required",experience:f?"":"Experience is required",annual_salary:g?"":"Annual Salary is required"});if(p&&!/^\+?\d{1,3}-?\d{9,15}$/.test(p))return void a({contact_number:"Please enter contact number under 15 digits"});if(y){if(y&&!/^(https?:\/\/)?(www\.)?[\w.-]+\.[a-z]{2,5}(\/\S*)?$/i.test(y))return void a({company_website:"Invalid URL format"})}if(X)return;if((await b().fire({title:"Update Job?",text:"Do you want to update this job?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){const e={...s,skill:t};M(!0);const a=await c.Z.post(m.Z+`/admin/job/admin_edit/${C}`,e,{headers:{"Content-Type":"application/json",key:d.Z,token:B,adminid:D}});200===a.data.status?(M(!1),b().fire({title:"Job Updated successfully!",icon:"success",confirmButtonText:"Close"}),E("/admin/jobs")):(M(!1),b().fire({title:"Failed",text:a.data.message,icon:"error",confirmButtonText:"Close"}))}}catch(l){M(!1),b().fire({title:"Could not update this job. Please try after some time!",icon:"error",confirmButtonText:"Close"}),console.log("Could not submit job data")}},children:"SAVE"}),(0,v.jsx)("button",{type:"button",className:"btn btn-primary button2",onClick:()=>E("/admin/jobs"),children:"CANCEL"})]})]})]}),(0,v.jsx)(N.Z,{})]})]})]})}},1588:(e,a,s)=>{var t=s(64836);a.Z=void 0;var l=t(s(45649)),o=s(80184),n=(0,l.default)((0,o.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"LocationOn");a.Z=n}}]);
//# sourceMappingURL=7019.5d216df0.chunk.js.map