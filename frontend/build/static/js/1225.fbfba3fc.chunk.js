"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[1225],{61225:(e,t,i)=>{i.r(t),i.d(t,{default:()=>b});var a=i(72791),n=i(65167),s=i(93953),l=i(20890),o=i(93517),r=i(98333),d=i(31243),c=i(12503),m=i(10287),u=i(21830),x=i.n(u),g=i(57689),h=i(11087),f=i(88329),p=i(24529),j=i(80184);const b=()=>{const[e,t]=(0,a.useState)({title:"",image:""}),[i,u]=(0,a.useState)({title:"",image:""}),[b,y]=(0,a.useState)(!1),C=f.Z.get("token"),w=f.Z.get("adminID"),B=(0,g.s0)(),[T,N]=(0,a.useState)(null),{slug:v}=(0,g.UO)(),S=async()=>{try{y(!0);const e=await d.Z.post(c.Z+`/admin/slider/admin_edit/${v}`,null,{headers:{"Content-Type":"application/json",key:m.Z,token:C,adminid:w}});y(!1),t(e.data.response),N(e.data.response.image)}catch(e){console.log("Error at edit slider at Admin panel")}},I=async a=>{const n=a.target,s=n.files[0];if(s){if(s.size>819200)return x().fire({title:"Image size should be under 800 KB",icon:"warning",confirmButtonText:"Close"}),void(n.value="");const a=new Image;a.src=window.URL.createObjectURL(s),a.onload=()=>{const l=a.naturalWidth,o=a.naturalHeight;1920!==l||634!==o?(x().fire({title:"Image resolution should be 1920x634 pixels",icon:"warning",confirmButtonText:"Close"}),n.value=""):(u({...i,image:""}),function(e){return new Promise(((t,i)=>{const a=new FileReader;a.readAsDataURL(e),a.onload=()=>{t(a.result)},a.onerror=e=>{i(e)}}))}(s).then((i=>{t({...e,image:i}),N(i)})))}}};return(0,a.useEffect)((()=>{C?(S(),window.scrollTo(0,0)):B("/admin")}),[C,B]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n.Z,{}),(0,j.jsxs)("div",{className:"APBasic",children:[(0,j.jsx)(s.Z,{}),b?(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"loader-container"})}):(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:"site-min-height",children:[(0,j.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,j.jsxs)(o.Z,{"aria-label":"breadcrumb",separator:(0,j.jsx)(r.Z,{fontSize:"small"}),children:[(0,j.jsx)(h.rU,{to:"/admin/admins/dashboard",underline:"hover",color:"inherit",children:"Dashboard"}),(0,j.jsx)(h.rU,{to:"/admin/sliders",underline:"hover",color:"inherit",children:"Sliders"}),(0,j.jsx)(l.Z,{color:"text.primary",children:"Edit Slider"})]})}),(0,j.jsx)("h2",{className:"adminPageHeading",children:"Edit Slider"}),(0,j.jsx)("form",{className:"adminForm",children:(0,j.jsxs)("div",{className:"mb-4 mt-5",children:[(0,j.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,j.jsxs)("label",{for:"formFile",class:"form-label",children:["Slider Title",(0,j.jsx)("span",{className:"RedStar",children:"*"})]}),(0,j.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${i.title&&"input-error"}`,name:"title",placeholder:"Slider Title",value:e.title,onChange:e=>{const{name:i,value:a}=e.target;t((e=>({...e,[i]:a}))),u((e=>({...e,[i]:""})))}}),i.title&&(0,j.jsx)("div",{className:"text-danger",children:i.title})]}),(0,j.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,j.jsxs)("label",{for:"formFile",class:"form-label",children:["Image",(0,j.jsx)("span",{className:"RedStar",children:"*"})]}),(0,j.jsx)("input",{className:`form-control ${i.image&&"input-error"}`,type:"file",id:"formFile",label:"Image",name:"logo",accept:".jpeg, .png, .jpg",onChange:e=>I(e)}),i.image&&(0,j.jsx)("div",{className:"text-danger",children:i.image}),(0,j.jsx)("div",{id:"emailHelp",class:"form-text",children:"Supported File Types: gif, jpg, jpeg, png (Max. 600 KB). Best file size 1920 X 634 pixels."}),T&&(0,j.jsxs)("div",{children:[(0,j.jsx)("img",{className:"selectedInputImage",src:T,alt:"Selected"}),e.image?(0,j.jsx)("button",{className:"APButton3",type:"button",onClick:()=>(async e=>{try{if((await x().fire({title:"Delete Image?",text:"Do you want to delete this Image?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){const t=await d.Z.post(c.Z+`/admin/slider/admin_deleteImage/${e}`,null,{headers:{"Content-Type":"application/json",key:m.Z,token:C,adminid:w}});200===t.data.status?(x().fire({title:"Image Deleted successfully!",icon:"success",confirmButtonText:"Close"}),S()):x().fire({title:t.data.message,icon:"error",confirmButtonText:"Close"})}}catch(t){y(!1),x().fire({title:"Failed",text:"Could not delete Image. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not delete image!",t)}})(v),children:"Delete"}):(0,j.jsx)("button",{className:"APButton3",onClick:()=>{N(null),t({...e,image:""});const i=document.getElementById("formFile");i&&(i.value="")},children:"Delete"})]})]}),(0,j.jsx)("button",{type:"button",className:"btn btn-primary button1",onClick:async()=>{try{const i={};if(""===e.title&&(i.title="Slider Title is required",window.scrollTo(0,0)),""===e.image&&(i.image="Image is required",window.scrollTo(0,0)),u(i),0===Object.keys(i).length){if((await x().fire({title:"Edit Slider?",text:"Do you want to Edit this Slider?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){y(!0);const i=await d.Z.post(c.Z+`/admin/slider/admin_edit/${v}`,e,{headers:{"Content-Type":"application/json",key:m.Z,token:C,adminid:w}});y(!1),200===i.data.status?(x().fire({title:"Slider updated successfully!",icon:"success",confirmButtonText:"Close"}),t({...e,title:"",image:""}),window.scrollTo(0,0),B("/admin/sliders")):x().fire({title:i.data.message,icon:"error",confirmButtonText:"Close"})}}}catch(i){y(!1),x().fire({title:"Failed",text:"Could not Edit Slider. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not edit slider!",i)}},children:"SAVE"}),(0,j.jsx)("button",{type:"button",className:"btn btn-primary button2",onClick:()=>B("/admin/sliders"),children:"CANCEL"})]})})]}),(0,j.jsx)(p.Z,{})]})]})]})}}}]);
//# sourceMappingURL=1225.fbfba3fc.chunk.js.map