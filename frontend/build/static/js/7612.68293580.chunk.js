"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[7612],{61460:(e,t,s)=>{s.r(t),s.d(t,{default:()=>N});var a=s(72791),n=s(65167),i=s(93953),l=s(20890),r=s(93517),o=s(50533),c=s(98333),d=s(12503),m=s(10287),u=s(21830),h=s.n(u),x=s(31243),j=s(57689),g=(s(5282),s(88329)),b=(s(88890),s(66770)),f=s.n(b),p=(s(86009),s(24529)),w=s(80184);const N=()=>{(0,a.useRef)(null);const[e,t]=(0,a.useState)({subject:"",message:""}),[s,u]=(0,a.useState)({email_formatting:""}),[b,N]=(0,a.useState)({subject:"",message:"",email_formatting:""}),[y,C]=(0,a.useState)(),[v,k]=(0,a.useState)(!1),Z=g.Z.get("token"),_=g.Z.get("adminID"),B=(0,j.s0)(),{slug:E}=(0,j.UO)(),T=e=>{const{name:s,value:a}=e.target;t((e=>({...e,[s]:a}))),N((e=>({...e,[s]:""})))};return(0,a.useEffect)((()=>{Z?((async()=>{try{k(!0);const e=await x.Z.post(d.Z+`/admin/newsletter/admin_edit/${E}`,null,{headers:{"Content-Type":"application/json",key:m.Z,token:Z,adminid:_}});k(!1),t(e.data.response)}catch(e){console.log("Error at chnage username at Admin panel")}})(),window.scrollTo(0,0)):B("/admin")}),[Z,B]),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(n.Z,{}),(0,w.jsxs)("div",{className:"APBasic",children:[(0,w.jsx)(i.Z,{}),v?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{className:"loader-container"})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"site-min-height",children:[(0,w.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,w.jsxs)(r.Z,{"aria-label":"breadcrumb",separator:(0,w.jsx)(c.Z,{fontSize:"small"}),children:[(0,w.jsx)(o.Z,{underline:"hover",color:"inherit",onClick:()=>B("/admin/admins/dashboard"),children:"Dashboard"}),(0,w.jsx)(o.Z,{underline:"hover",color:"inherit",onClick:()=>B("/admin/newsletters/index"),children:"Newsletter"}),(0,w.jsx)(l.Z,{color:"text.primary",children:"Edit Newsletter"})]})}),(0,w.jsx)("h2",{className:"adminPageHeading",children:"Edit Newsletter"}),(0,w.jsx)("form",{className:"editNewsletterForm",children:(0,w.jsxs)("div",{className:"mb-4 mt-5",children:[(0,w.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,w.jsxs)("label",{for:"formFile",class:"form-label",children:["Subject",(0,w.jsx)("span",{className:"RedStar",children:"*"})]}),(0,w.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${b.subject&&"input-error"}`,name:"subject",placeholder:"Subject",value:e.subject,onChange:T}),b.subject&&(0,w.jsx)("div",{className:"text-danger",children:b.subject})]}),(0,w.jsxs)("div",{className:" mb-5 DashBoardInputBx DashBoardCreatBx APJoditEditor",children:[(0,w.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Message",(0,w.jsx)("span",{className:"RedStar",children:"*"})]}),(0,w.jsx)(f(),{theme:"snow",value:e.message,onChange:e=>T({target:{name:"message",value:e}}),style:{minHeight:"250px",height:"200px"},placeholder:"Add your text here..."}),b.message&&(0,w.jsx)("div",{className:"text-danger",children:b.message})]}),(0,w.jsxs)("div",{className:"",children:[(0,w.jsx)("button",{type:"button",className:"btn btn-primary button1",onClick:async()=>{try{const t={};if(""===e.subject&&(t.subject="Subject is required",window.scrollTo(0,0)),""===e.message&&(t.message="Message is required",window.scrollTo(0,0)),N(t),0===Object.keys(t).length){if((await h().fire({title:"Update Newsletter?",text:"Do you want to update this Newsletter?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){k(!0);const t=await x.Z.post(d.Z+`/admin/newsletter/admin_edit/${E}`,e,{headers:{"Content-Type":"application/json",key:m.Z,token:Z,adminid:_}});k(!1),200===t.data.status?(h().fire({title:"Newsletter updated successfully!",icon:"success",confirmButtonText:"Close"}),B("/admin/newsletters/index")):h().fire({title:t.data.message,icon:"error",confirmButtonText:"Close"})}}}catch(t){k(!1),h().fire({title:"Failed",text:"Could not update newsletter. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not change username!",t)}},children:"SAVE"}),(0,w.jsx)("button",{type:"button",className:"btn btn-primary button2",onClick:()=>B("/admin/newsletters/index"),children:"CANCEL"})]})]})}),(0,w.jsx)("hr",{}),(0,w.jsx)("h4",{className:"mb-5",children:"Check Newsletter Formatting by test email"}),(0,w.jsxs)("div",{class:"mb-4 DashBoardInputBx",children:[(0,w.jsxs)("label",{for:"formFile",class:"form-label",children:["Email Address",(0,w.jsx)("span",{className:"RedStar",children:"*"})]}),(0,w.jsx)("input",{type:"text",id:"form3Example1",className:"form-control",name:"email_formatting",placeholder:"Email Address",value:e.email_formatting,onChange:e=>u({...s,email_formatting:e.target.value})}),(null===y||void 0===y?void 0:y.email_formatting)&&(0,w.jsx)("div",{className:"text-danger",children:y.email_formatting})]}),(0,w.jsx)("button",{type:"button",className:"btn btn-primary button1",onClick:async()=>{try{let t={};if(""===s.email_formatting.trim())t.email_formatting="Email Formatting is required";else{/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email_formatting)||(t.email_formatting="Invalid email format")}if(0===Object.keys(t).length){k(!0);const t={...s,message:e.message},a=await x.Z.post(d.Z+`/admin/newsletter/admin_emailtest/${E}`,t,{headers:{"Content-Type":"application/json",key:m.Z,token:Z,adminid:_}});k(!1),200===a.data.status?h().fire({title:"Test Newsletter Email sent successfully!",icon:"success",confirmButtonText:"Close"}):h().fire({title:a.data.message,icon:"error",confirmButtonText:"Close"})}else C(t),window.scrollTo(0,0)}catch(t){console.log(t)}},children:"SEND"})]}),(0,w.jsx)(p.Z,{})]})]})]})}}}]);
//# sourceMappingURL=7612.68293580.chunk.js.map