"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[4424],{74424:(e,a,n)=>{n.r(a),n.d(a,{default:()=>w});var s=n(72791),l=n(65167),i=n(93953),t=n(20890),r=n(93517),o=n(50533),m=n(98333),c=n(31243),d=n(12503),u=n(10287),h=n(21830),f=n.n(h),x=n(57689),p=n(88329),j=n(24529),b=n(80184);const w=()=>{const[e,a]=(0,s.useState)({old_email:"",new_email:"",conf_email:""}),[n,h]=(0,s.useState)({new_email:"",conf_email:""}),[w,C]=(0,s.useState)(!1),_=p.Z.get("token"),N=p.Z.get("adminID"),g=(0,x.s0)(),E=e=>{const{name:n,value:s}=e.target;a((e=>({...e,[n]:s}))),h((e=>({...e,[n]:""})))},v=async()=>{try{C(!0);const e=await c.Z.post(d.Z+"/admin/changeemail",null,{headers:{"Content-Type":"application/json",key:u.Z,token:_,adminid:N}});C(!1),a(e.data.response)}catch(e){console.log("Error at change username at Admin panel")}};return(0,s.useEffect)((()=>{_?(v(),window.scrollTo(0,0)):g("/admin")}),[_,g]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Z,{}),(0,b.jsxs)("div",{className:"APBasic",children:[(0,b.jsx)(i.Z,{}),w?(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"loader-container"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"site-min-height",children:[(0,b.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,b.jsxs)(r.Z,{"aria-label":"breadcrumb",separator:(0,b.jsx)(m.Z,{fontSize:"small"}),children:[(0,b.jsx)(o.Z,{underline:"hover",color:"inherit",onClick:()=>g("/admin/admins/dashboard"),children:"Dashboard"}),(0,b.jsx)(t.Z,{color:"text.primary",children:"Change Email"})]})}),(0,b.jsx)("h2",{className:"adminPageHeading",children:"Change Admin Email"}),(0,b.jsx)("form",{className:"adminForm",children:(0,b.jsxs)("div",{className:"mb-4 mt-5",children:[(0,b.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,b.jsxs)("label",{for:"formFile",class:"form-label",children:["Current Email",(0,b.jsx)("span",{className:"RedStar",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"form3Example1",className:"form-control",name:"old_email",placeholder:"Current Email",value:e.old_email,disabled:!0})]}),(0,b.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,b.jsxs)("label",{for:"formFile",class:"form-label",children:["New Email",(0,b.jsx)("span",{className:"RedStar",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${n.new_email&&"input-error"}`,name:"new_email",placeholder:"New Email",value:e.new_email,onChange:E}),n.new_email&&(0,b.jsx)("div",{className:"text-danger",children:n.new_email})]}),(0,b.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,b.jsxs)("label",{for:"formFile",class:"form-label",children:["Confirm Email",(0,b.jsx)("span",{className:"RedStar",children:"*"})]}),(0,b.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${n.conf_email&&"input-error"}`,name:"conf_email",placeholder:"Confirm Email",value:e.conf_email,onChange:E}),(0,b.jsx)("errors",{className:"conf"})&&(0,b.jsx)("div",{className:"text-danger",children:n.conf_email})]}),(0,b.jsx)("button",{type:"button",className:"btn btn-primary button1",onClick:async()=>{try{const{new_email:a,conf_email:n}=e;if(!a||!n)return void h({new_email:a?"":"New Email is required",conf_email:n?"":"Confirm Email is required"});if(a!==n)return void h({conf_email:"New Email and Confirm Email do not match"});const s=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!s.test(a)||!s.test(n))return void h({new_email:"Invalid Email Address",conf_email:"Invalid Email Address"});if((await f().fire({title:"Update Email",text:"Do you want to update the email?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){C(!0);const a=await c.Z.post(d.Z+"/admin/changeemail",e,{headers:{"Content-Type":"application/json",key:u.Z,token:_,adminid:N}});C(!1),200===a.data.status?(f().fire({title:"Email updated successfully!",icon:"success",confirmButtonText:"Close"}),v(),window.scrollTo(0,0)):(a.data.status,f().fire({title:a.data.message,icon:"error",confirmButtonText:"Close"}))}}catch(a){C(!1),f().fire({title:"Failed",text:"Could not update email. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not change email!",a)}},children:"UPDATE"}),(0,b.jsx)("button",{type:"button",className:"btn btn-primary button2",onClick:()=>g("/admin/admins/dashboard"),children:"CANCEL"})]})})]}),(0,b.jsx)(j.Z,{})]})]})]})}}}]);
//# sourceMappingURL=4424.97138f69.chunk.js.map