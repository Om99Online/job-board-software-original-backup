"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[9778],{59778:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var i=a(72791),l=a(65167),s=a(93953),o=a(20890),n=a(93517),r=a(98333),c=a(31243),d=a(12503),m=a(10287),u=a(21830),p=a.n(u),x=a(57689),g=a(11087),h=(a(5282),a(88329)),f=a(66770),j=a.n(f),b=(a(86009),a(24529)),B=a(80184);const y=()=>{const[e,t]=(0,i.useState)({title:"",description:"",meta_keyword:"",meta_title:"",meta_description:"",image:""}),[a,u]=(0,i.useState)({title:"",description:"",meta_keyword:"",meta_title:"",meta_description:"",image:""}),[f,y]=(0,i.useState)(null),[w,C]=(0,i.useState)(!1),v=h.Z.get("token"),N=parseInt(h.Z.get("adminID")),T=(0,x.s0)(),{slug:I}=((0,i.useRef)(null),(0,x.UO)()),_=async()=>{try{C(!0);const e=await c.Z.post(d.Z+`/admin/blog/admin_editblogs/${I}`,null,{headers:{"Content-Type":"application/json",key:m.Z,token:v,adminid:N}});C(!1),t(e.data.response),y(e.data.response.image)}catch(e){console.log("Error at chnage username at Admin panel")}},k=(e,a)=>{t((t=>({...t,[e]:a})))},D=async i=>{const l=i.target,s=l.files[0];if(s){if(s.size>614400)return p().fire({title:"Image size should be under 600 KB",icon:"warning",confirmButtonText:"Close"}),void(l.value="");const i=new Image;i.src=window.URL.createObjectURL(s),i.onload=()=>{const o=i.naturalWidth,n=i.naturalHeight;o<250||n<250?(p().fire({title:"Minimum image resolution should be 250x250 pixels",icon:"warning",confirmButtonText:"Close"}),l.value=""):(u({...a,image:""}),function(e){return new Promise(((t,a)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>{t(i.result)},i.onerror=e=>{a(e)}}))}(s).then((a=>{t({...e,image:a}),y(a)})))}}};return(0,i.useEffect)((()=>{v?(_(),window.scrollTo(0,0)):T("/admin")}),[v,T]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(l.Z,{}),(0,B.jsxs)("div",{className:"APBasic",children:[(0,B.jsx)(s.Z,{}),w?(0,B.jsx)(B.Fragment,{children:(0,B.jsx)("div",{className:"loader-container"})}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"site-min-height",children:[(0,B.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,B.jsxs)(n.Z,{"aria-label":"breadcrumb",separator:(0,B.jsx)(r.Z,{fontSize:"small"}),children:[(0,B.jsx)(g.rU,{to:"/admin/admins/dashboard",underline:"hover",color:"inherit",children:"Dashboard"}),(0,B.jsx)(g.rU,{to:"/admin/blogs",underline:"hover",color:"inherit",children:"Blogs"}),(0,B.jsx)(o.Z,{color:"text.primary",children:"Edit Blog"})]})}),(0,B.jsx)("h2",{className:"adminPageHeading",children:"Edit Blog"}),(0,B.jsx)("form",{className:"adminForm",children:(0,B.jsxs)("div",{className:"mb-4 mt-5",children:[(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsxs)("label",{for:"formFile",class:"form-label",children:["Blog Title",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${a.title&&"input-error"}`,name:"title",placeholder:"Blog Title",value:e.title,onChange:k}),a.title&&(0,B.jsx)("div",{className:"text-danger",children:a.title})]}),(0,B.jsxs)("div",{className:"mb-5 DashBoardInputBx DashBoardCreatBx APJoditEditor",children:[(0,B.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Description",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)(j(),{theme:"snow",value:e.description,onChange:e=>k("description",e)}),a.description&&(0,B.jsx)("div",{className:"text-danger",children:a.description})]}),(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsxs)("label",{for:"formFile",class:"form-label",children:["Image",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)("input",{class:`form-control ${a.image&&"input-error"}`,type:"file",id:"formFile",label:"Image",name:"logo",accept:".jpeg, .png, .jpg, .gif",onChange:e=>D(e)}),a.image&&(0,B.jsx)("div",{className:"text-danger",children:a.image}),(0,B.jsx)("div",{id:"emailHelp",class:"form-text",children:"Supported File Types: gif, jpg, jpeg, png (Max. 10MB). Min file size 250 X 250 pixels."}),f&&(0,B.jsxs)("div",{children:[(0,B.jsx)("img",{className:"selectedInputImage",src:f,alt:"Selected"}),e.image?(0,B.jsx)("button",{className:"APButton3",type:"button",onClick:()=>(async e=>{try{if((await p().fire({title:"Delete Image?",text:"Do you want to delete this Image?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){const t=await c.Z.post(d.Z+`/admin/blog/admin_deleteBlogImage/${e}`,null,{headers:{"Content-Type":"application/json",key:m.Z,token:v,adminid:N}});200===t.data.status?(p().fire({title:"Image Deleted successfully!",icon:"success",confirmButtonText:"Close"}),_()):p().fire({title:t.data.message,icon:"error",confirmButtonText:"Close"})}}catch(t){C(!1),p().fire({title:"Failed",text:"Could not delete Image. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not delete image!",t)}})(I),children:"Delete"}):(0,B.jsx)("button",{className:"APButton3",onClick:()=>{y(null),t({...e,image:""});const a=document.getElementById("formFile");a&&(a.value="")},children:"Delete"})]})]}),(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsx)("label",{for:"formFile",class:"form-label",children:"Meta Title"}),(0,B.jsx)("input",{type:"text",id:"form3Example1",className:"form-control",name:"meta_title",placeholder:"Meta Title",value:e.meta_title,onChange:k})]}),(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsx)("label",{for:"formFile",class:"form-label",children:"Meta Keyword"}),(0,B.jsx)("input",{type:"text",id:"form3Example1",className:"form-control",name:"meta_keyword",placeholder:"Meta Keyword",value:e.meta_keyword,onChange:k})]}),(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsx)("label",{for:"formFile",class:"form-label",children:"Meta Description"}),(0,B.jsx)("textarea",{type:"text",id:"form3Example1",className:"form-control",name:"meta_description",placeholder:"Meta Description",value:e.meta_description,onChange:k}),(0,B.jsx)("div",{id:"emailHelp",class:"form-text",children:"Note.: Meta details are important please fill these information. If you don't filled it by default information will be show."})]}),(0,B.jsx)("button",{type:"button",className:"btn btn-primary button1",onClick:async()=>{try{const a={};if(""===e.title&&(a.title="Blog Title is required",window.scrollTo(0,0)),e.description.trim()||(a.description="Blog Description is required",window.scrollTo(0,0)),""===e.image&&(a.image="Blog Image is required",window.scrollTo(0,0)),u(a),0===Object.keys(a).length){if((await p().fire({title:"Edit Blog?",text:"Do you want to Edit this Blog?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){C(!0);const a=await c.Z.post(d.Z+`/admin/blog/admin_editblogs/${I}`,e,{headers:{"Content-Type":"application/json",key:m.Z,token:v,adminid:N}});C(!1),200===a.data.status?(p().fire({title:"Blog updated successfully!",icon:"success",confirmButtonText:"Close"}),T("/admin/blogs"),t({...e,title:"",description:"",image:"",meta_title:"",meta_keyword:"",meta_description:""}),window.scrollTo(0,0)):p().fire({title:a.data.message,icon:"error",confirmButtonText:"Close"})}}}catch(a){C(!1),p().fire({title:"Failed",text:"Could not update Blog. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not change username!",a)}},children:"SAVE"}),(0,B.jsx)("button",{type:"button",className:"btn btn-primary button2",onClick:()=>T("/admin/blogs"),children:"CANCEL"})]})})]}),(0,B.jsx)(b.Z,{})]})]})]})}}}]);
//# sourceMappingURL=9778.2a559414.chunk.js.map