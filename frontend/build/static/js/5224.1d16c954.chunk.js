"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[5224],{85224:(e,t,s)=>{s.r(t),s.d(t,{default:()=>w});var n=s(72791),a=s(57689),i=s(65167),l=s(93953),o=s(20890),c=s(93517),r=s(50533),d=s(98333),h=s(31243),m=s(12503),u=s(10287),x=s(21830),j=s.n(x),g=s(90772),C=s(27247),p=s(51007),f=s(57246),b=s(1582),v=s(88329),y=s(24529),k=s(80184);const w=()=>{const e=(0,a.s0)(),[t,s]=(0,n.useState)(!1),[x,w]=(0,n.useState)([]),[Z,N]=(0,n.useState)([]),[S,L]=(0,n.useState)(""),B=v.Z.get("token"),D=v.Z.get("adminID"),[T,_]=(0,n.useState)(1),M=async()=>{try{s(!0);const e=await h.Z.post(m.Z+"/admin/newsletter/sentMail",null,{headers:{"Content-Type":"application/json",key:u.Z,token:B,adminid:D}});s(!1),w(e.data.response)}catch(e){s(!1),console.log("Cannot get plans data at APmanageplans")}},[E,A]=(0,n.useState)(!0),z=e=>{if("selectAll"===e){A(!E);const e=E?x.map((e=>e.id)):[];N(e)}else Z.includes(e)?N(Z.filter((t=>t!==e))):N([...Z,e])},[P,H]=(0,n.useState)({key:"",direction:"ascending"}),[F,V]=(0,n.useState)("\ud83d\udd3a"),q=(R=x,Y=P.key,I=P.direction,J=S,[...R].filter((e=>e.email.toLowerCase().includes(J)||e.subject.toLowerCase().includes(J)||e.is_mail_sent.toLowerCase().includes(J)||e.sent_on.toLowerCase().includes(J))).sort(((e,t)=>e[Y]<t[Y]?"ascending"===I?-1:1:e[Y]>t[Y]?"ascending"===I?1:-1:0)));var R,Y,I,J;const Q=x.filter((e=>{const t=S.toLowerCase();return e.email.toLowerCase().includes(t)||e.subject.toLowerCase().includes(t)||e.is_mail_sent.toLowerCase().includes(t)||e.sent_on.toLowerCase().includes(t)})),U=20*T,$=U-20,G=q.slice($,U),K=Math.ceil(q.length/20),O=[];for(let n=1;n<=K;n++)O.push(n);(0,n.useEffect)((()=>{B?(M(),window.scrollTo(0,0)):e("/admin")}),[B,e]);const W=e=>{let t="ascending";P.key===e&&"ascending"===P.direction?(t="descending",V("\ud83d\udd3b")):V("\ud83d\udd3a"),H({key:e,direction:t})};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(i.Z,{}),(0,k.jsxs)("div",{className:"APBasic APManageSubadmin",children:[(0,k.jsx)(l.Z,{}),t?(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{className:"loader-container"})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"site-min-height",children:[(0,k.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,k.jsxs)(c.Z,{"aria-label":"breadcrumb",separator:(0,k.jsx)(d.Z,{fontSize:"small"}),children:[(0,k.jsx)(r.Z,{underline:"hover",color:"inherit",onClick:()=>e("/admin/admins/dashboard"),children:"Dashboard"}),(0,k.jsx)(r.Z,{underline:"hover",color:"inherit",onClick:()=>e("/admin/newsletters"),children:"Newsletter"}),(0,k.jsx)(o.Z,{color:"text.primary",children:"Sent Mail List"})]})}),(0,k.jsx)("div",{className:"ManageSubAdminHeader",children:(0,k.jsx)("h2",{className:"",children:"Sent Mail List"})}),""!=x?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"manageSubadminPart1",children:[(0,k.jsx)("form",{children:(0,k.jsxs)("div",{className:"manageSubadminPart1Sec1",children:[(0,k.jsx)("h4",{children:"Search Newsletter by Subject"}),(0,k.jsx)("div",{class:"APDashboardSearchBx",children:(0,k.jsx)("input",{type:"text",id:"form3Example1",className:"form-control",name:"searchQuery",placeholder:"Search..",value:S,onChange:e=>{const t=e.target.value.toLowerCase();L(t)}})})]})}),(0,k.jsxs)("h4",{children:["No. of Results ",$+1,"-",Math.min(U,Q.length||x.length)," ","of ",x.length]})]}),(0,k.jsx)("div",{className:"manageSubadminPart2",children:(0,k.jsxs)("table",{class:"table",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"checkBoxCol checkBxHead",children:(0,k.jsx)("input",{type:"checkbox",className:"tableCheckBox",onClick:()=>z("selectAll")})}),(0,k.jsxs)("th",{onClick:()=>W("email"),children:["Email Address",F]}),(0,k.jsx)("th",{children:"User Type"}),(0,k.jsxs)("th",{onClick:()=>W("subject"),children:["Subject",F]}),(0,k.jsxs)("th",{onClick:()=>W("is_mail_sent"),children:[(0,k.jsx)(g.Z,{})," Mail Status",F]}),(0,k.jsxs)("th",{onClick:()=>W("sent_on"),children:[(0,k.jsx)(g.Z,{})," Mail Sent Time",F]}),(0,k.jsx)("th",{scope:"col",children:"Action"})]})}),(0,k.jsx)("tbody",{children:G.map((e=>(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"checkBoxCol",children:(0,k.jsx)("input",{type:"checkbox",className:"tableCheckBox",checked:Z.includes(e.id),onChange:()=>z(e.id)})}),(0,k.jsx)("td",{children:e.email}),(0,k.jsx)("td",{children:e.user_type}),(0,k.jsx)("td",{children:e.subject}),(0,k.jsx)("td",{children:e.is_mail_sent}),(0,k.jsx)("td",{children:e.sent_on}),(0,k.jsx)("td",{className:"APActionButton",children:(0,k.jsx)("button",{className:"btn btn-secondary",onClick:()=>(async e=>{try{if((await j().fire({title:"Delete Email Log?",text:"Do you want to Delete this Email Log?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){const t=await h.Z.post(m.Z+`/admin/newsletter/deleteSentMail/${e}`,null,{headers:{"Content-Type":"application/json",key:u.Z,token:B,adminid:D}});200===t.data.status?j().fire({title:"Email Log deleted successfully!",icon:"success",confirmButtonText:"Close"}):j().fire({title:t.data.message,icon:"error",confirmButtonText:"Close"}),M()}}catch(t){s(!1),j().fire({title:"Failed. Please try after some time!",text:"Could not Delete Email Log",icon:"error",confirmButtonText:"Close"}),console.log("Couldn't delete the record!",t.message)}})(e.slug),children:(0,k.jsx)(p.Z,{title:"Delete",children:(0,k.jsx)(C.Z,{})})})})]})})))})]})}),(0,k.jsxs)("div",{className:"manageSubadminpart3",children:[(0,k.jsx)("div",{className:"functionalityButton",children:(0,k.jsx)("button",{type:"button",className:"btn btn-primary APButton4",onClick:()=>(async()=>{try{if((await j().fire({title:"Delete Email Logs?",text:"Do you want to Delete Email Logs?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){let e=Z.toString();console.log(e);const t=await h.Z.post(m.Z+"/admin/newsletter/sentMail",{idList:e,action:"delete"},{headers:{"Content-Type":"application/json",key:u.Z,token:B,adminid:D}});A(!0),N(""),200===t.data.status?j().fire({title:"Email Logs Deleted successfully!",icon:"success",confirmButtonText:"Close"}):j().fire({title:"Couldn't Delete!",icon:"error",confirmButtonText:"Close"}),M()}}catch(e){s(!1),j().fire({title:"Failed. Please try after some time!",text:"Could not Delete Email Logs",icon:"error",confirmButtonText:"Close"}),console.log("Couldn't Delete the record!",e.message)}})(),children:"DELETE"})}),(0,k.jsx)("div",{className:"pagination",children:(0,k.jsx)(b.Z,{spacing:2,children:(0,k.jsx)(f.Z,{count:K,color:"primary",page:T,onChange:(e,t)=>_(t)})})})]})]}):(0,k.jsx)("div",{className:"appliedJobListNoData mt-5",children:"No Records Found"})]}),(0,k.jsx)(y.Z,{})]})]})]})}},90772:(e,t,s)=>{var n=s(64836);t.Z=void 0;var a=n(s(45649)),i=s(80184),l=(0,a.default)((0,i.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonth");t.Z=l},27247:(e,t,s)=>{var n=s(64836);t.Z=void 0;var a=n(s(45649)),i=s(80184),l=(0,a.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=l}}]);
//# sourceMappingURL=5224.1d16c954.chunk.js.map