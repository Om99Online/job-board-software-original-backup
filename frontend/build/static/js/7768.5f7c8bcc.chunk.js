"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[7768],{87768:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var l=a(72791),s=a(65167),i=a(93953),n=a(20890),o=a(93517),r=a(98333),c=a(12503),d=a(10287),m=a(21830),u=a.n(m),h=a(31243),b=a(57689),p=a(11087),x=(a(5282),a(88329)),j=a(66770),f=a.n(j),v=(a(86009),a(24529)),B=a(80184);const g=()=>{var e,t,a,m;(0,l.useRef)(null);const[j,g]=(0,l.useState)({title:"",subject:"",template:"",subject_el:"",template_el:""}),[N,T]=(0,l.useState)({title:"",subject:"",template:"",subject_el:"",template_el:""}),[k,y]=(0,l.useState)([]),[C,w]=(0,l.useState)(!1),E=x.Z.get("token"),_=x.Z.get("adminID"),[S,D]=(0,l.useState)({id:""}),A=(0,b.s0)(),{slug:Z}=(0,b.UO)(),P=e=>{const{name:t,value:a}=e.target;g((e=>({...e,[t]:a}))),T((e=>({...e,[t]:""})))};return(0,l.useEffect)((()=>{E?((async()=>{try{w(!0);const e=await h.Z.post(c.Z+`/admin/editemailtemplates/${Z}`,null,{headers:{"Content-Type":"application/json",key:d.Z,token:E,adminid:_}});w(!1),D({...S,id:e.data.response.id}),console.log(S),g(e.data.response),y(e.data.response.variables)}catch(e){w(!1),console.log("Cannot get data at edit Page List")}})(),window.scrollTo(0,0)):A("/admin")}),[E,A]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(s.Z,{}),(0,B.jsxs)("div",{className:"APBasic",children:[(0,B.jsx)(i.Z,{}),C?(0,B.jsx)(B.Fragment,{children:(0,B.jsx)("div",{className:"loader-container"})}):(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{className:"site-min-height",children:[(0,B.jsx)("div",{className:"breadCumb1",role:"presentation",children:(0,B.jsxs)(o.Z,{"aria-label":"breadcrumb",separator:(0,B.jsx)(r.Z,{fontSize:"small"}),children:[(0,B.jsx)(p.rU,{to:"/admin/admins/dashboard",underline:"hover",color:"inherit",children:"Dashboard"}),(0,B.jsx)(p.rU,{to:"/admin/emailtemplates",underline:"hover",color:"inherit",children:"Email Template Management"}),(0,B.jsx)(n.Z,{color:"text.primary",children:"Edit Email Template Detail"})]})}),(0,B.jsxs)("div",{className:"ManageSubAdminHeader",children:[(0,B.jsx)("h2",{className:"adminPageHeading",children:"Edit Email Template Detail"}),(0,B.jsx)("button",{className:"btn adminMediumButton1 APMSbutton",onClick:async()=>{try{w(!0),console.log("Sending request with data:",S.id);const e=await h.Z.post(c.Z+`/admin/testmail/${Z}`,S,{headers:{"Content-Type":"application/json",key:d.Z,adminid:_}});w(!1),200===e.data.status?u().fire({title:"Success",icon:"success",confirmButtonText:"Close"}):u().fire({title:e.data.message,icon:"error",confirmButtonText:"Close"})}catch(e){w(!1),u().fire({title:"Failed",text:"Could not test mail. Please try again later!",icon:"error",confirmButtonText:"Close"})}},children:"Test Mail"})]}),(0,B.jsx)("form",{children:(0,B.jsxs)("div",{className:"mb-4 mt-5",children:[(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsxs)("label",{for:"formFile",class:"form-label",children:["Title",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${N.title&&"input-error"}`,name:"title",placeholder:"Enter Title",value:j.title,onChange:P}),N.title&&(0,B.jsx)("div",{className:"text-danger",children:N.title})]}),(0,B.jsxs)("div",{className:"firstBlockEmailTemplate",children:[(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsx)("label",{for:"formFile",class:"form-label",children:"Variables to use"}),null===(e=Object.entries(k))||void 0===e?void 0:e.map((e=>{let[t,a]=e;return(0,B.jsx)("div",{className:"APEditEmailTemplateButtons",children:(0,B.jsx)("button",{className:"btn APButton3",onClick:e=>((e,t)=>{e.preventDefault(),console.log(t),g((e=>({...e,subject:e.subject+t})))})(e,a),children:a})})})),(0,B.jsx)("div",{id:"emailHelp",class:"form-text",children:"Note* : click on above variable buttons to use these in below subject on behalf of dynamic values (like : username: [!username!])"})]}),(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsxs)("label",{for:"formFile",class:"form-label",children:["Subject",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${N.subject&&"input-error"}`,name:"subject",placeholder:"Subject",value:j.subject,onChange:P}),N.subject&&(0,B.jsx)("div",{className:"text-danger",children:N.subject})]})]}),(0,B.jsxs)("div",{className:"secondBlockEmailTemplate",children:[(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsx)("label",{for:"formFile",class:"form-label",children:"Variables to use"}),null===(t=Object.entries(k))||void 0===t?void 0:t.map((e=>{let[t,a]=e;return(0,B.jsx)("div",{className:"APEditEmailTemplateButtons",children:(0,B.jsx)("button",{className:"btn APButton3",onClick:e=>((e,t)=>{e.preventDefault(),console.log(t),g((e=>({...e,template:e.template+t})))})(e,a),children:a})})})),(0,B.jsx)("div",{id:"emailHelp",class:"form-text",children:"Note* : click on above variable buttons to use these in below subject on behalf of dynamic values (like : username: [!username!])"})]}),(0,B.jsxs)("div",{className:"mb-5 DashBoardInputBx DashBoardCreatBx APJoditEditor",children:[(0,B.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Body",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)(f(),{theme:"snow",value:j.template,onChange:e=>P({target:{name:"template",value:e}}),style:{minHeight:"250px",height:"200px"},placeholder:"Add your text here..."}),N.template&&(0,B.jsx)("div",{className:"text-danger",children:N.template})]})]}),(0,B.jsxs)("div",{className:"thirdBlockEmailTemplate",children:[(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsx)("label",{for:"formFile",class:"form-label",children:"Variables to use"}),null===(a=Object.entries(k))||void 0===a?void 0:a.map((e=>{let[t,a]=e;return(0,B.jsx)("div",{className:"APEditEmailTemplateButtons",children:(0,B.jsx)("button",{className:"btn APButton3",onClick:e=>((e,t)=>{e.preventDefault(),console.log(t),g((e=>({...e,subject_de:e.subject_de+t})))})(e,a),children:a})})})),(0,B.jsx)("div",{id:"emailHelp",class:"form-text",children:"Note* : click on above variable buttons to use these in below subject on behalf of dynamic values (like : username: [!username!])"})]}),(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsxs)("label",{for:"formFile",class:"form-label",children:["Subject (Greek)",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)("input",{type:"text",id:"form3Example1",className:`form-control ${N.subject_el&&"input-error"}`,name:"subject_el",placeholder:"Subject Greek",value:j.subject_el,onChange:P}),N.subject_el&&(0,B.jsx)("div",{className:"text-danger",children:N.subject_el})]})]}),(0,B.jsxs)("div",{className:"fourthBlockEmailTemplate",children:[(0,B.jsxs)("div",{class:"mb-5 DashBoardInputBx",children:[(0,B.jsx)("label",{for:"formFile",class:"form-label",children:"Variables to use"}),null===(m=Object.entries(k))||void 0===m?void 0:m.map((e=>{let[t,a]=e;return(0,B.jsx)("div",{className:"APEditEmailTemplateButtons",children:(0,B.jsx)("button",{className:"btn APButton3",onClick:e=>((e,t)=>{e.preventDefault(),console.log(t),g((e=>({...e,template_de:e.template_de+t})))})(e,a),children:a})})})),(0,B.jsx)("div",{id:"emailHelp",class:"form-text",children:"Note* : click on above variable buttons to use these in below subject on behalf of dynamic values (like : username: [!username!])"})]}),(0,B.jsxs)("div",{className:"mb-5 DashBoardInputBx DashBoardCreatBx APJoditEditor",children:[(0,B.jsxs)("label",{className:"form-label",htmlFor:"form3Example3",children:["Body (Greek)",(0,B.jsx)("span",{className:"RedStar",children:"*"})]}),(0,B.jsx)(f(),{theme:"snow",value:j.template_el,onChange:e=>P({target:{name:"template_el",value:e}}),style:{minHeight:"250px",height:"200px"},placeholder:"Add your text here..."}),N.template_el&&(0,B.jsx)("div",{className:"text-danger",children:N.template_el})]})]}),(0,B.jsx)("button",{type:"button",className:"btn btn-primary adminLowerButton1",onClick:async()=>{try{console.log(j);const e={};if(""===j.title&&(e.title="Title is required",window.scrollTo(0,0)),""===j.subject&&(e.subject="Subject is required",window.scrollTo(0,0)),""===j.template&&(e.template="Template is required",window.scrollTo(0,0)),""===j.subject_el&&(e.subject_el="Subject(Greek) is required",window.scrollTo(0,0)),""===j.template_el&&(e.template_el="Template(Greek) is required",window.scrollTo(0,0)),T(e),0===Object.keys(e).length){if((await u().fire({title:"Update Template?",text:"Do you want to update this template?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No"})).isConfirmed){w(!0);const e=await h.Z.post(c.Z+`/admin/editemailtemplates/${Z}`,j,{headers:{"Content-Type":"application/json",key:d.Z,token:E,adminid:_}});w(!1),200===e.data.status?(u().fire({title:"Template Updated successfully!",icon:"success",confirmButtonText:"Close"}),A("/admin/emailtemplates")):u().fire({title:e.data.message,icon:"error",confirmButtonText:"Close"})}}}catch(e){w(!1),u().fire({title:"Failed",text:"Could not update email template. Please try again later!",icon:"error",confirmButtonText:"Close"}),console.log("Could not update email template!",e)}},children:"SAVE"}),(0,B.jsx)("button",{type:"button",className:"btn btn-primary adminLowerButton2",onClick:()=>A("/admin/emailtemplates"),children:"CANCEL"})]})})]}),(0,B.jsx)(v.Z,{})]})]})]})}}}]);
//# sourceMappingURL=7768.5f7c8bcc.chunk.js.map