"use strict";(self.webpackChunkjob_board_software=self.webpackChunkjob_board_software||[]).push([[1154],{41154:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var r=n(72791),s=n(65764),a=n(57689),o=n(11087),i=n(21830),c=n.n(i),l=n(31243),u=n(12503),d=n(10287),m=n(88329),p=n(80184);function y(){const e=(0,s.useStripe)(),t=(0,s.useElements)(),n=(0,a.s0)();let i={transaction_id:""};const[y,f]=(0,r.useState)(null),[g,h]=(0,r.useState)(!1),[x,w]=(0,r.useState)(!1),{slug:b}=(0,a.UO)(),j=m.Z.get("user_type"),_=m.Z.get("tokenClient");(0,r.useEffect)((()=>{if(!e)return;const t=new URLSearchParams(window.location.search).get("payment_intent_client_secret");t&&e.retrievePaymentIntent(t).then((e=>{let{paymentIntent:t}=e;switch(t.status){case"succeeded":f("Payment succeeded!");const e=function(){const e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let t="";for(let n=0;n<17;n++){const n=Math.floor(62*Math.random());t+=e.charAt(n)}return t}();console.log(e),(async e=>{try{if(e){var t=sessionStorage.getItem("prePaymentSlug");i.transaction_id=e,await l.Z.post(u.Z+`/payments/checkoutSuccess/${t}`,i,{headers:{"Content-Type":"application/json",key:d.Z,token:_}})}else console.log("Failed to generate order ID")}catch(n){console.log("Error in handle success api")}})(e),c().fire({title:"Payment succeeded!",icon:"success",confirmButtonText:"Close"}),"candidate"===j&&n("/candidates/myaccount"),"recruiter"===j&&n("/user/myprofile");break;case"processing":f("Your payment is processing."),c().fire({title:"Your payment is processing",icon:"warning",confirmButtonText:"Close"}),"candidate"===j&&n("/candidates/myaccount"),"recruiter"===j&&n("/user/myprofile");break;case"requires_payment_method":f("Your payment was not successful, please try again."),c().fire({title:"Your payment was not successful, please try again",icon:"error",confirmButtonText:"Close"}),"candidate"===j&&n("/candidates/myaccount"),"recruiter"===j&&n("/user/myprofile");break;default:f("Something went wrong."),c().fire({title:"Something went wrong",icon:"error",confirmButtonText:"Close"}),"candidate"===j&&n("/candidates/myaccount"),"recruiter"===j&&n("/user/myprofile")}}))}),[e]);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"stripeFormBox",style:{padding:"40px",margin:"auto",marginTop:"200px",width:"600px",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",borderRadius:"5px",display:`${x} && none`},children:(0,p.jsxs)("form",{id:"payment-form",onSubmit:async n=>{if(n.preventDefault(),!e||!t)return;h(!0);const{error:r}=await e.confirmPayment({elements:t,confirmParams:{return_url:`https://job-board-software.logicspice.com/payment/paymentoption/${b}`}});"card_error"===r.type||"validation_error"===r.type?(f(r.message),c().fire({title:r.message,icon:"warning",confirmButtonText:"Close"})):(console.log(r.message),c().fire({title:r.message,icon:"warning",confirmButtonText:"Close"}),f("An unexpected error occurred.")),h(!1)},children:[(0,p.jsx)(s.PaymentElement,{id:"payment-element",options:{layout:"tabs"}}),(0,p.jsx)("button",{className:"payButtonStripe",disabled:g||!e||!t,id:"submit",children:(0,p.jsx)("span",{id:"button-text",children:g?(0,p.jsx)("div",{className:"spinner",id:"spinner"}):"Pay now"})})]})}),y&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{id:"payment-message",className:"stripePaymentMessage"}),(0,p.jsx)(o.rU,{to:"candidate"===j?"/candidates/myaccount":"/user/myprofile",className:"navButton1",children:"My Profile"})]})]})}}}]);
//# sourceMappingURL=1154.f7f25746.chunk.js.map